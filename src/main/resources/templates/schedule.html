<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Generated Schedule</title>
    <style>
        body { font-family: sans-serif; margin: 2em; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px;}
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left;}
        th { background-color: #f4f4f4; }
        .back-link { display: inline-block; margin-bottom: 20px; color: #007bff; text-decoration: none; }
        /* Styles for the "Generate" button */
        .generator-form { margin: 20px 0; padding: 20px; background: #fff; border: 1px solid #ddd; border-radius: 8px; }
        .generate-button {
            background: #28a745; /* Green */
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }
    </style>
</head>
<body>
<a th:href="@{/}" class="back-link">&larr; Back to Dashboard</a>
<h1>Generated Schedule</h1>

<div class="generator-form">
    <h2>Run Generator</h2>
    <p>Click the button to clear the old schedule and generate a new one based on the current "Tasks" (Workload).</p>
    <form th:action="@{/schedule/generate}" th:method="post">
        <button type="submit" class="generate-button">
            Generate New Schedule
        </button>
    </form>
</div>

<h2>Current Schedule in Database</h2>
<table th:if="${!lessonsList.isEmpty()}">
    <thead>
    <tr>
        <th>Lesson ID</th>
        <th>When (Slot)</th>
        <th>Group</th>
        <th>Subject</th>
        <th>Teacher</th>
        <th>Where (Classroom)</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="lesson : ${lessonsList}">
        <td th:text="${lesson.timeSlot?.dayOfWeek} + ' ' + ${lesson.timeSlot?.startTime}"></td>
        <td th:text="${lesson.studentGroup?.name}"></td>
        <td th:text="${lesson.subject?.name}"></td>
        <td th:text="${lesson.teacher?.name}"></td>
        <td th:text="${lesson.classroom?.roomNumber}"></td>
    </tr>
    </tbody>
</table>

<p th:if="${lessonsList.isEmpty()}">
    The schedule has not been generated yet (or the database is empty).
</p>

</body>
</html>